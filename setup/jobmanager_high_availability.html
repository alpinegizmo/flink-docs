<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Apache Flink 1.2-SNAPSHOT Documentation: JobManager High Availability (HA)</title>
    <link rel="shortcut icon" href="https://alpinegizmo.github.io/flink-docs//page/favicon.ico" type="image/x-icon">
    <link rel="icon" href="https://alpinegizmo.github.io/flink-docs//page/favicon.ico" type="image/x-icon">

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://alpinegizmo.github.io/flink-docs//page/css/flink.css">
    <link rel="stylesheet" href="https://alpinegizmo.github.io/flink-docs//page/css/syntax.css">
    <link rel="stylesheet" href="https://alpinegizmo.github.io/flink-docs//page/css/codetabs.css">
    <link rel="stylesheet" href="https://alpinegizmo.github.io/flink-docs//page/font-awesome/css/font-awesome.min.css">
    
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <!-- Main content. -->
    <div class="container">
      

      
      <div class="row">
        <div class="col-lg-3">
          







  
    
    
    
      
    
  

  
    
    
    
      













<div class="sidenav-logo">
  <p><a href="https://alpinegizmo.github.io/flink-docs/"><img class="bottom" alt="Apache Flink" src="https://alpinegizmo.github.io/flink-docs//page/img/navbar-brand-logo.jpg"></a> v1.2-SNAPSHOT</p>
</div>
<ul id="sidenav">

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//"><i class="fa fa-home title" aria-hidden="true"></i> Home</a></li>
    
  

  
    

    

    
    
    

    <hr class="section-break"></hr>

    
    
      
      
        
        
<li><a href="#collapse-2" data-toggle="collapse"><i class="fa fa-map-o title appetizer" aria-hidden="true"></i> Concepts <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-2"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
      
      
<li><a href="https://alpinegizmo.github.io/flink-docs//concepts/programming-model.html">Programming Model</a></li>
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//concepts/runtime.html">Distributed Runtime</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//quickstart/setup_quickstart.html"><i class="fa fa-power-off title appetizer" aria-hidden="true"></i> Quickstart</a></li>
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-7" data-toggle="collapse"><i class="fa fa-file-code-o title appetizer" aria-hidden="true"></i> Examples <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-7"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//quickstart/run_example_quickstart.html">Monitoring Wikipedia Edits</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    <hr class="section-break"></hr>

    
    
      
      
        
        
<li><a href="#collapse-10" data-toggle="collapse"><i class="fa fa-code title maindish" aria-hidden="true"></i> Application Development <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-10"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-11" data-toggle="collapse">Installation & Setup <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-11"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//internals/ide_setup.html">IDE Setup</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//quickstart/java_api_quickstart.html">Java Projects</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//quickstart/scala_api_quickstart.html">Scala Projects</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/scala_shell.html">Scala REPL</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//setup/flink_on_windows.html">Running Flink on Windows</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/linking.html">Linking with Optional Modules</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//setup/building.html">Building Flink from Source</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-20" data-toggle="collapse">Basic API Concepts <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-20"><ul>
  <li><a href="https://alpinegizmo.github.io/flink-docs//dev/api_concepts.html">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/scala_api_extensions.html">Scala API Extensions</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/java8.html">Java 8</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/datastream_api.html">Streaming (DataStream API)</a></li>
    
  

  
    

    

    
    
    

    

    
    
      
      
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/windows.html">Windows</a></li>
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-26" data-toggle="collapse">Event Time <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-26"><ul>
  <li><a href="https://alpinegizmo.github.io/flink-docs//dev/event_time.html">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/event_timestamps_watermarks.html">Generating Timestamps / Watermarks</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/event_timestamp_extractors.html">Pre-defined Timestamp Extractors / Watermark Emitters</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-30" data-toggle="collapse">Connectors <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-30"><ul>
  <li><a href="https://alpinegizmo.github.io/flink-docs//dev/connectors/">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/connectors/kafka.html">Kafka</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/connectors/cassandra.html">Cassandra</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/connectors/kinesis.html">Kinesis</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/connectors/elasticsearch.html">Elasticsearch</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/connectors/elasticsearch2.html">Elasticsearch 2.x</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/connectors/filesystem_sink.html">Rolling File Sink</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/connectors/rabbitmq.html">RabbitMQ</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/connectors/nifi.html">NiFi</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/connectors/redis.html">Redis</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/connectors/twitter.html">Twitter</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/state.html">State & Checkpointing</a></li>
      
    
  

  
    

    

    
    
    

    

    
    
      
      
<li><a href="https://alpinegizmo.github.io/flink-docs//setup/fault_tolerance.html">Failure & Recovery Model</a></li>
      
    
  

  
    

    

    
    
    

    

    
    
      
      
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/types_serialization.html">Data Types & Serialization</a></li>
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/execution.html">Managing Execution</a></li>
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-46" data-toggle="collapse">Batch (DataSet API) <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-46"><ul>
  <li><a href="https://alpinegizmo.github.io/flink-docs//dev/batch/">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/batch/dataset_transformations.html">Transformations</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/batch/fault_tolerance.html">Fault Tolerance</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/batch/zip_elements_guide.html">Zipping Elements</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/batch/connectors.html">Connectors</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/batch/python.html">Python API</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/batch/examples.html">Examples</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/batch/hadoop_compatibility.html">Hadoop Compatibility</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/local_execution.html">Local Execution</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/cluster_execution.html">Cluster Execution</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-57" data-toggle="collapse">Libraries <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-57"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/table_api.html">Table and SQL</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/libs/cep.html">Event Processing (CEP)</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/libs/storm_compatibility.html">Storm Compatibility</a></li>
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-61" data-toggle="collapse">Graphs: Gelly <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-61"><ul>
  <li><a href="https://alpinegizmo.github.io/flink-docs//dev/libs/gelly/">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/libs/gelly/graph_api.html">Graph API</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/libs/gelly/iterative_graph_processing.html">Iterative Graph Processing</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/libs/gelly/library_methods.html">Library Methods</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/libs/gelly/graph_algorithms.html">Graph Algorithms</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/libs/gelly/graph_generators.html">Graph Generators</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-68" data-toggle="collapse">Machine Learning <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-68"><ul>
  <li><a href="https://alpinegizmo.github.io/flink-docs//dev/libs/ml/">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/libs/ml/quickstart.html">Quickstart</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/libs/ml/als.html">ALS</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/libs/ml/contribution_guide.html">How to Contribute</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/libs/ml/cross_validation.html">Cross Validation</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/libs/ml/distance_metrics.html">Distance Metrics</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/libs/ml/knn.html">k-Nearest Neighbors Join</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/libs/ml/min_max_scaler.html">MinMax Scaler</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/libs/ml/multiple_linear_regression.html">Multiple Linear Regression</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/libs/ml/optimization.html">Optimization</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/libs/ml/pipelines.html">Pipelines</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/libs/ml/polynomial_features.html">Polynomial Features</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/libs/ml/standard_scaler.html">Standard Scaler</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/libs/ml/svm.html">SVM using CoCoA</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
<li><a href="https://alpinegizmo.github.io/flink-docs//setup/config.html"><i class="fa fa-sliders title maindish" aria-hidden="true"></i> Configuration</a></li>
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-86" data-toggle="collapse" class="active"><i class="fa fa-cogs title maindish" aria-hidden="true"></i> Deployment & Operations</a><div class="collapse in" id="collapse-86"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//setup/cli.html">CLI</a></li>
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-88" data-toggle="collapse">Deployment <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-88"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//setup/cluster_setup.html">Standalone Cluster</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//setup/yarn_setup.html">YARN</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//setup/aws.html">AWS</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//setup/gce_setup.html">Google Compute Engine</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//setup/jobmanager_high_availability.html" class="active">High Availability (HA)</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//setup/savepoints.html">Savepoints</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//setup/security-ssl.html">SSL Setup</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//dev/state_backends.html">State Backends</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-99" data-toggle="collapse"><i class="fa fa-bug title maindish" aria-hidden="true"></i> Debugging & Monitoring <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-99"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//monitoring/metrics.html">Metrics</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//monitoring/logging.html">Logging</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//monitoring/rest_api.html">Monitoring REST API</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//monitoring/back_pressure.html">Back Pressure Monitoring</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//monitoring/best_practices.html">Best Practices</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    <hr class="section-break"></hr>

    
    
      
      
        
        
<li><a href="#collapse-106" data-toggle="collapse"><i class="fa fa-book title dessert" aria-hidden="true"></i> Internals <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-106"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//internals/components.html">Component Stack</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//internals/dependencies.html">Projects and Dependencies</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//internals/stream_checkpointing.html">Fault Tolerance for Data Streaming</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//internals/job_scheduling.html">Jobs and Scheduling</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs//internals/add_operator.html">Adding a new DataSet Operator</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    
      
  <li class="divider"></li>
  <li><a href="http://flink.apache.org"><i class="fa fa-external-link title" aria-hidden="true"></i> Project Page</a></li>
</ul>

<div class="sidenav-search-box">
  <form class="navbar-form" role="search" action="https://alpinegizmo.github.io/flink-docs//search-results.html">
    <div class="form-group">
      <input type="text" class="form-control" size="16px" name="q" placeholder="Search Docs">
    </div>
    <button type="submit" class="btn btn-default">Go</button>
  </form>
</div>

<div class="sidenav-versions">
  <div class="dropdown">
    <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown">Pick Docs Version
    <span class="caret"></span></button>
    <ul class="dropdown-menu">
      
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.1">v1.1</a></li>
      
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.0">v1.0</a></li>
      
    </ul>
  </div>
</div>

        </div>
        <div class="col-lg-9 content">
          

          





  
  
    
    
      
    
  

  
  
    
    
      



<ol class="breadcrumb">

  
  
    <li><i class="fa fa-cogs title maindish" aria-hidden="true"></i> Deployment & Operations</li>
  

  
  
    <li class="active">High Availability (HA)</li>
  

</ol>

<h1>JobManager High Availability (HA)</h1>



<p>The JobManager coordinates every Flink deployment. It is responsible for both <em>scheduling</em> and <em>resource management</em>.</p>

<p>By default, there is a single JobManager instance per Flink cluster. This creates a <em>single point of failure</em> (SPOF): if the JobManager crashes, no new programs can be submitted and running programs fail.</p>

<p>With JobManager High Availability, you can recover from JobManager failures and thereby eliminate the <em>SPOF</em>. You can configure high availability for both <strong>standalone</strong> and <strong>YARN clusters</strong>.</p>

<ul id="markdown-toc">
  <li><a href="#standalone-cluster-high-availability" id="markdown-toc-standalone-cluster-high-availability">Standalone Cluster High Availability</a>    <ul>
      <li><a href="#configuration" id="markdown-toc-configuration">Configuration</a></li>
    </ul>
  </li>
  <li><a href="#yarn-cluster-high-availability" id="markdown-toc-yarn-cluster-high-availability">YARN Cluster High Availability</a>    <ul>
      <li><a href="#configuration-1" id="markdown-toc-configuration-1">Configuration</a></li>
    </ul>
  </li>
  <li><a href="#bootstrap-zookeeper" id="markdown-toc-bootstrap-zookeeper">Bootstrap ZooKeeper</a></li>
</ul>

<h2 id="standalone-cluster-high-availability">Standalone Cluster High Availability</h2>

<p>The general idea of JobManager high availability for standalone clusters is that there is a <strong>single leading JobManager</strong> at any time and <strong>multiple standby JobManagers</strong> to take over leadership in case the leader fails. This guarantees that there is <strong>no single point of failure</strong> and programs can make progress as soon as a standby JobManager has taken leadership. There is no explicit distinction between standby and master JobManager instances. Each JobManager can take the role of master or standby.</p>

<p>As an example, consider the following setup with three JobManager instances:</p>

<p><img src="https://alpinegizmo.github.io/flink-docs//fig/jobmanager_ha_overview.png" class="center" /></p>

<h3 id="configuration">Configuration</h3>

<p>To enable JobManager High Availability you have to set the <strong>high-availability mode</strong> to <em>zookeeper</em>, configure a <strong>ZooKeeper quorum</strong> and set up a <strong>masters file</strong> with all JobManagers hosts and their web UI ports.</p>

<p>Flink leverages <strong><a href="http://zookeeper.apache.org">ZooKeeper</a></strong> for <em>distributed coordination</em> between all running JobManager instances. ZooKeeper is a separate service from Flink, which provides highly reliable distributed coordination via leader election and light-weight consistent state storage. Check out <a href="http://zookeeper.apache.org/doc/trunk/zookeeperStarted.html">ZooKeeper’s Getting Started Guide</a> for more information about ZooKeeper. Flink includes scripts to <a href="#bootstrap-zookeeper">bootstrap a simple ZooKeeper</a> installation.</p>

<h4 id="masters-file-masters">Masters File (masters)</h4>

<p>In order to start an HA-cluster configure the <em>masters</em> file in <code>conf/masters</code>:</p>

<ul>
  <li>
    <p><strong>masters file</strong>: The <em>masters file</em> contains all hosts, on which JobManagers are started, and the ports to which the web user interface binds.</p>

    <pre>
jobManagerAddress1:webUIPort1
[...]
jobManagerAddressX:webUIPortX
</pre>
  </li>
</ul>

<p>By default, the job manager will pick a <em>random port</em> for inter process communication. You can change this via the <strong><code>high-availability.jobmanager.port</code></strong> key. This key accepts single ports (e.g. <code>50010</code>), ranges (<code>50000-50025</code>), or a combination of both (<code>50010,50011,50020-50025,50050-50075</code>).</p>

<h4 id="config-file-flink-confyaml">Config File (flink-conf.yaml)</h4>

<p>In order to start an HA-cluster add the following configuration keys to <code>conf/flink-conf.yaml</code>:</p>

<ul>
  <li>
    <p><strong>high-availability mode</strong> (required): The <em>high-availability mode</em> has to be set in <code>conf/flink-conf.yaml</code> to <em>zookeeper</em> in order to enable high availability mode.</p>

    <pre>high-availability: zookeeper</pre>
  </li>
  <li>
    <p><strong>ZooKeeper quorum</strong> (required): A <em>ZooKeeper quorum</em> is a replicated group of ZooKeeper servers, which provide the distributed coordination service.</p>

    <pre>high-availability.zookeeper.quorum: address1:2181[,...],addressX:2181</pre>

    <p>Each <em>addressX:port</em> refers to a ZooKeeper server, which is reachable by Flink at the given address and port.</p>
  </li>
  <li>
    <p><strong>ZooKeeper root</strong> (recommended): The <em>root ZooKeeper node</em>, under which all cluster namespace nodes are placed.</p>

    <pre>high-availability.zookeeper.path.root: /flink

</pre>
  </li>
  <li>
    <p><strong>ZooKeeper namespace</strong> (recommended): The <em>namespace ZooKeeper node</em>, under which all required coordination data for a cluster is placed.</p>

    <pre>high-availability.zookeeper.path.namespace: /default_ns # important: customize per cluster</pre>

    <p><strong>Important</strong>: if you are running multiple Flink HA clusters, you have to manually configure separate namespaces for each cluster. By default, the Yarn cluster and the Yarn session automatically generate namespaces based on Yarn application id. A manual configuration overrides this behaviour in Yarn. Specifying a namespace with the -z CLI option, in turn, overrides manual configuration.</p>
  </li>
  <li>
    <p><strong>State backend and storage directory</strong> (required): JobManager meta data is persisted in the <em>state backend</em> and only a pointer to this state is stored in ZooKeeper. Currently, only the file system state backend is supported in HA mode.</p>

    <pre>
high-availability.zookeeper.storageDir: hdfs:///flink/recovery</pre>
    <p>state.backend: filesystem
state.backend.fs.checkpointdir: hdfs:///flink/checkpoints</p>

    <p>The <code>storageDir</code> stores all meta data needed to recover a JobManager failure.</p>
  </li>
</ul>

<p>After configuring the masters and the ZooKeeper quorum, you can use the provided cluster startup scripts as usual. They will start an HA-cluster. Keep in mind that the <strong>ZooKeeper quorum has to be running</strong> when you call the scripts and make sure to <strong>configure a separate ZooKeeper root path</strong> for each HA cluster you are starting.</p>

<h4 id="example-standalone-cluster-with-2-jobmanagers">Example: Standalone Cluster with 2 JobManagers</h4>

<ol>
  <li>
    <p><strong>Configure high availability mode and ZooKeeper quorum</strong> in <code>conf/flink-conf.yaml</code>:</p>

    <pre>
high-availability: zookeeper
high-availability.zookeeper.quorum: localhost:2181
high-availability.zookeeper.path.root: /flink
high-availability.zookeeper.path.namespace: /cluster_one # important: customize per cluster
high-availability.zookeeper.storageDir: hdfs:///flink/recovery</pre>
  </li>
</ol>

<p>state.backend: filesystem
state.backend.fs.checkpointdir: hdfs:///flink/checkpoints</p>

<ol>
  <li>
    <p><strong>Configure masters</strong> in <code>conf/masters</code>:</p>

    <pre>
localhost:8081
localhost:8082</pre>
  </li>
  <li>
    <p><strong>Configure ZooKeeper server</strong> in <code>conf/zoo.cfg</code> (currently it’s only possible to run a single ZooKeeper server per machine):</p>

    <pre>server.0=localhost:2888:3888</pre>
  </li>
  <li>
    <p><strong>Start ZooKeeper quorum</strong>:</p>

    <pre>
$ bin/start-zookeeper-quorum.sh
Starting zookeeper daemon on host localhost.</pre>
  </li>
  <li>
    <p><strong>Start an HA-cluster</strong>:</p>

    <pre>
$ bin/start-cluster.sh
Starting HA cluster with 2 masters and 1 peers in ZooKeeper quorum.
Starting jobmanager daemon on host localhost.
Starting jobmanager daemon on host localhost.
Starting taskmanager daemon on host localhost.</pre>
  </li>
  <li>
    <p><strong>Stop ZooKeeper quorum and cluster</strong>:</p>

    <pre>
$ bin/stop-cluster.sh
Stopping taskmanager daemon (pid: 7647) on localhost.
Stopping jobmanager daemon (pid: 7495) on host localhost.
Stopping jobmanager daemon (pid: 7349) on host localhost.
$ bin/stop-zookeeper-quorum.sh
Stopping zookeeper daemon (pid: 7101) on host localhost.</pre>
  </li>
</ol>

<h2 id="yarn-cluster-high-availability">YARN Cluster High Availability</h2>

<p>When running a highly available YARN cluster, <strong>we don’t run multiple JobManager (ApplicationMaster) instances</strong>, but only one, which is restarted by YARN on failures. The exact behaviour depends on on the specific YARN version you are using.</p>

<h3 id="configuration-1">Configuration</h3>

<h4 id="maximum-application-master-attempts-yarn-sitexml">Maximum Application Master Attempts (yarn-site.xml)</h4>

<p>You have to configure the maximum number of attempts for the application masters for <strong>your</strong> YARN setup in <code>yarn-site.xml</code>:</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;property&gt;</span>
  <span class="nt">&lt;name&gt;</span>yarn.resourcemanager.am.max-attempts<span class="nt">&lt;/name&gt;</span>
  <span class="nt">&lt;value&gt;</span>4<span class="nt">&lt;/value&gt;</span>
  <span class="nt">&lt;description&gt;</span>
    The maximum number of application master execution attempts.
  <span class="nt">&lt;/description&gt;</span>
<span class="nt">&lt;/property&gt;</span></code></pre></figure>

<p>The default for current YARN versions is 2 (meaning a single JobManager failure is tolerated).</p>

<h4 id="application-attempts-flink-confyaml">Application Attempts (flink-conf.yaml)</h4>

<p>In addition to the HA configuration (<a href="#configuration">see above</a>), you have to configure the maximum attempts in <code>conf/flink-conf.yaml</code>:</p>

<pre>yarn.application-attempts: 10</pre>

<p>This means that the application can be restarted 10 times before YARN fails the application. It’s important to note that <code>yarn.resourcemanager.am.max-attempts</code> is an upper bound for the application restarts. Therfore, the number of application attempts set within Flink cannot exceed the YARN cluster setting with which YARN was started.</p>

<h4 id="container-shutdown-behaviour">Container Shutdown Behaviour</h4>

<ul>
  <li><strong>YARN 2.3.0 &lt; version &lt; 2.4.0</strong>. All containers are restarted if the application master fails.</li>
  <li><strong>YARN 2.4.0 &lt; version &lt; 2.6.0</strong>. TaskManager containers are kept alive across application master failures. This has the advantage that the startup time is faster and that the user does not have to wait for obtaining the container resources again.</li>
  <li><strong>YARN 2.6.0 &lt;= version</strong>: Sets the attempt failure validity interval to the Flinks’ Akka timeout value. The attempt failure validity interval says that an application is only killed after the system has seen the maximum number of application attempts during one interval. This avoids that a long lasting job will deplete it’s application attempts.</li>
</ul>

<p style="border-radius: 5px; padding: 5px" class="bg-danger"><b>Note</b>: Hadoop YARN 2.4.0 has a major bug (fixed in 2.5.0) preventing container restarts from a restarted Application Master/Job Manager container. See <a href="https://issues.apache.org/jira/browse/FLINK-4142">FLINK-4142</a> for details. We recommend using at least Hadoop 2.5.0 for high availability setups on YARN.</p>

<h4 id="example-highly-available-yarn-session">Example: Highly Available YARN Session</h4>

<ol>
  <li>
    <p><strong>Configure HA mode and ZooKeeper quorum</strong> in <code>conf/flink-conf.yaml</code>:</p>

    <pre>
high-availability: zookeeper
high-availability.zookeeper.quorum: localhost:2181
high-availability.zookeeper.storageDir: hdfs:///flink/recovery
high-availability.zookeeper.path.root: /flink
high-availability.zookeeper.path.namespace: /cluster_one # important: customize per cluster
state.backend: filesystem
state.backend.fs.checkpointdir: hdfs:///flink/checkpoints
yarn.application-attempts: 10</pre>
  </li>
  <li>
    <p><strong>Configure ZooKeeper server</strong> in <code>conf/zoo.cfg</code> (currently it’s only possible to run a single ZooKeeper server per machine):</p>

    <pre>server.0=localhost:2888:3888</pre>
  </li>
  <li>
    <p><strong>Start ZooKeeper quorum</strong>:</p>

    <pre>
$ bin/start-zookeeper-quorum.sh
Starting zookeeper daemon on host localhost.</pre>
  </li>
  <li>
    <p><strong>Start an HA-cluster</strong>:</p>

    <pre>
$ bin/yarn-session.sh -n 2</pre>
  </li>
</ol>

<h2 id="bootstrap-zookeeper">Bootstrap ZooKeeper</h2>

<p>If you don’t have a running ZooKeeper installation, you can use the helper scripts, which ship with Flink.</p>

<p>There is a ZooKeeper configuration template in <code>conf/zoo.cfg</code>. You can configure the hosts to run ZooKeeper on with the <code>server.X</code> entries, where X is a unique ID of each server:</p>

<pre>
server.X=addressX:peerPort:leaderPort
[...]
server.Y=addressY:peerPort:leaderPort
</pre>

<p>The script <code>bin/start-zookeeper-quorum.sh</code> will start a ZooKeeper server on each of the configured hosts. The started processes start ZooKeeper servers via a Flink wrapper, which reads the configuration from <code>conf/zoo.cfg</code> and makes sure to set some required configuration values for convenience. In production setups, it is recommended to manage your own ZooKeeper installation.</p>


        </div>
      </div>
    </div><!-- /.container -->

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/3.1.0/anchor.min.js"></script>
    <script src="https://alpinegizmo.github.io/flink-docs//page/js/flink.js"></script>

    <!-- Google Analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-52545728-1', 'auto');
      ga('send', 'pageview');
    </script>

    <!-- Disqus -->
    
  </body>
</html>
