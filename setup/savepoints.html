<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Apache Flink 1.2-SNAPSHOT Documentation: Savepoints</title>
    <link rel="shortcut icon" href="https://alpinegizmo.github.io/flink-docs/page/favicon.ico" type="image/x-icon">
    <link rel="icon" href="https://alpinegizmo.github.io/flink-docs/page/favicon.ico" type="image/x-icon">

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://alpinegizmo.github.io/flink-docs/page/css/flink.css">
    <link rel="stylesheet" href="https://alpinegizmo.github.io/flink-docs/page/css/syntax.css">
    <link rel="stylesheet" href="https://alpinegizmo.github.io/flink-docs/page/css/codetabs.css">
    <link rel="stylesheet" href="https://alpinegizmo.github.io/flink-docs/page/font-awesome/css/font-awesome.min.css">
    
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <!-- Main content. -->
    <div class="container">
      

      
      <div class="row">
        <div class="col-lg-3">
          







  
    
    
    
      
    
  

  
    
    
    
      













<div class="sidenav-logo">
  <p><a href="https://alpinegizmo.github.io/flink-docs"><img class="bottom" alt="Apache Flink" src="https://alpinegizmo.github.io/flink-docs/page/img/navbar-brand-logo.jpg"></a> v1.2-SNAPSHOT</p>
</div>
<ul id="sidenav">

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/"><i class="fa fa-home title" aria-hidden="true"></i> Home</a></li>
    
  

  
    

    

    
    
    

    <hr class="section-break"></hr>

    
    
      
      
        
        
<li><a href="#collapse-2" data-toggle="collapse"><i class="fa fa-map-o title appetizer" aria-hidden="true"></i> Concepts <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-2"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
      
      
<li><a href="https://alpinegizmo.github.io/flink-docs/concepts/programming-model.html">Programming Model</a></li>
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/concepts/runtime.html">Distributed Runtime</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/quickstart/setup_quickstart.html"><i class="fa fa-power-off title appetizer" aria-hidden="true"></i> Quickstart</a></li>
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-7" data-toggle="collapse"><i class="fa fa-file-code-o title appetizer" aria-hidden="true"></i> Examples <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-7"><ul>
  <li><a href="https://alpinegizmo.github.io/flink-docs/examples/">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/quickstart/run_example_quickstart.html">Monitoring Wikipedia Edits</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/batch/examples.html">Batch Examples</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    <hr class="section-break"></hr>

    
    
      
      
        
        
<li><a href="#collapse-11" data-toggle="collapse"><i class="fa fa-cogs title maindish" aria-hidden="true"></i> Installation & Setup <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-11"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/quickstart/java_api_quickstart.html">Sample Project in Java</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/quickstart/scala_api_quickstart.html">Sample Project in Scala</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/linking_with_flink.html">Linking with Flink</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/internals/ide_setup.html">IDE Setup</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/scala_shell.html">Scala REPL</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/linking.html">Linking with Optional Modules</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/setup/flink_on_windows.html">Running Flink on Windows</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/setup/building.html">Building Flink from Source</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-21" data-toggle="collapse"><i class="fa fa-code title maindish" aria-hidden="true"></i> Application Development <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-21"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-22" data-toggle="collapse">Basic API Concepts <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-22"><ul>
  <li><a href="https://alpinegizmo.github.io/flink-docs/dev/api_concepts.html">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/scala_api_extensions.html">Scala API Extensions</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/java8.html">Java 8</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-26" data-toggle="collapse">Streaming (DataStream API) <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-26"><ul>
  <li><a href="https://alpinegizmo.github.io/flink-docs/dev/datastream_api.html">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
      
      
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/windows.html">Windows</a></li>
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-28" data-toggle="collapse">Event Time <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-28"><ul>
  <li><a href="https://alpinegizmo.github.io/flink-docs/dev/event_time.html">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/event_timestamps_watermarks.html">Generating Timestamps / Watermarks</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/event_timestamp_extractors.html">Pre-defined Timestamp Extractors / Watermark Emitters</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-32" data-toggle="collapse">Connectors <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-32"><ul>
  <li><a href="https://alpinegizmo.github.io/flink-docs/dev/connectors/">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/connectors/guarantees.html">Fault Tolerance Guarantees</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/connectors/kafka.html">Kafka</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/connectors/cassandra.html">Cassandra</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/connectors/kinesis.html">Kinesis</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/connectors/elasticsearch.html">Elasticsearch</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/connectors/elasticsearch2.html">Elasticsearch 2.x</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/connectors/filesystem_sink.html">Rolling File Sink</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/connectors/rabbitmq.html">RabbitMQ</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/connectors/nifi.html">NiFi</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/connectors/redis.html">Redis</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/connectors/twitter.html">Twitter</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/state.html">State & Checkpointing</a></li>
      
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-47" data-toggle="collapse">Batch (DataSet API) <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-47"><ul>
  <li><a href="https://alpinegizmo.github.io/flink-docs/dev/batch/">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/batch/dataset_transformations.html">Transformations</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/batch/fault_tolerance.html">Fault Tolerance</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/batch/iterations.html">Iterations</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/batch/zip_elements_guide.html">Zipping Elements</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/batch/connectors.html">Connectors</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/batch/python.html">Python API</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/batch/hadoop_compatibility.html">Hadoop Compatibility</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/local_execution.html">Local Execution</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/cluster_execution.html">Cluster Execution</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-58" data-toggle="collapse">Data Types & Serialization <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-58"><ul>
  <li><a href="https://alpinegizmo.github.io/flink-docs/dev/types_serialization.html">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/custom_serializers.html">Custom Serializers</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-61" data-toggle="collapse">Managing Execution <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-61"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/execution_configuration.html">Execution Configuration</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/packaging.html">Program Packaging</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/parallel.html">Parallel Execution</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/execution_plans.html">Execution Plans</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/setup/fault_tolerance.html">Restart Strategies</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-68" data-toggle="collapse">Libraries <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-68"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/table_api.html">Table and SQL</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/libs/cep.html">Event Processing (CEP)</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/libs/storm_compatibility.html">Storm Compatibility</a></li>
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-72" data-toggle="collapse">Graphs: Gelly <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-72"><ul>
  <li><a href="https://alpinegizmo.github.io/flink-docs/dev/libs/gelly/">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/libs/gelly/graph_api.html">Graph API</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/libs/gelly/iterative_graph_processing.html">Iterative Graph Processing</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/libs/gelly/library_methods.html">Library Methods</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/libs/gelly/graph_algorithms.html">Graph Algorithms</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/libs/gelly/graph_generators.html">Graph Generators</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-79" data-toggle="collapse">Machine Learning <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-79"><ul>
  <li><a href="https://alpinegizmo.github.io/flink-docs/dev/libs/ml/">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/libs/ml/quickstart.html">Quickstart</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/libs/ml/als.html">ALS</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/libs/ml/contribution_guide.html">How to Contribute</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/libs/ml/cross_validation.html">Cross Validation</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/libs/ml/distance_metrics.html">Distance Metrics</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/libs/ml/knn.html">k-Nearest Neighbors Join</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/libs/ml/min_max_scaler.html">MinMax Scaler</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/libs/ml/multiple_linear_regression.html">Multiple Linear Regression</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/libs/ml/optimization.html">Optimization</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/libs/ml/pipelines.html">Pipelines</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/libs/ml/polynomial_features.html">Polynomial Features</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/libs/ml/standard_scaler.html">Standard Scaler</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/libs/ml/svm.html">SVM using CoCoA</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/monitoring/best_practices.html">Best Practices</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-97" data-toggle="collapse" class="active"><i class="fa fa-sliders title maindish" aria-hidden="true"></i> Deployment & Operations</a><div class="collapse in" id="collapse-97"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
      
      
<li><a href="https://alpinegizmo.github.io/flink-docs/setup/config.html">Configuration</a></li>
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/setup/cli.html">CLI</a></li>
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-100" data-toggle="collapse">Deployment <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-100"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/setup/cluster_setup.html">Standalone Cluster</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/setup/yarn_setup.html">YARN</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/setup/aws.html">AWS</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/setup/gce_setup.html">Google Compute Engine</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/setup/jobmanager_high_availability.html">High Availability (HA)</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/setup/savepoints.html" class="active">Savepoints</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/setup/security-ssl.html">SSL Setup</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/dev/state_backends.html">State Backends</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-111" data-toggle="collapse"><i class="fa fa-bug title maindish" aria-hidden="true"></i> Debugging & Monitoring <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-111"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/monitoring/metrics.html">Metrics</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/monitoring/logging.html">Logging</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/monitoring/rest_api.html">Monitoring REST API</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/monitoring/back_pressure.html">Back Pressure Monitoring</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    <hr class="section-break"></hr>

    
    
      
      
        
        
<li><a href="#collapse-117" data-toggle="collapse"><i class="fa fa-book title dessert" aria-hidden="true"></i> Internals <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-117"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/internals/components.html">Component Stack</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/internals/stream_checkpointing.html">Fault Tolerance for Data Streaming</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/internals/job_scheduling.html">Jobs and Scheduling</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="https://alpinegizmo.github.io/flink-docs/internals/state_backends.html">State Backends</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    
      
  <li class="divider"></li>
  <li><a href="http://flink.apache.org"><i class="fa fa-external-link title" aria-hidden="true"></i> Project Page</a></li>
</ul>

<div class="sidenav-search-box">
  <form class="navbar-form" role="search" action="https://alpinegizmo.github.io/flink-docs/search-results.html">
    <div class="form-group">
      <input type="text" class="form-control" size="16px" name="q" placeholder="Search Docs">
    </div>
    <button type="submit" class="btn btn-default">Go</button>
  </form>
</div>

<div class="sidenav-versions">
  <div class="dropdown">
    <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown">Pick Docs Version
    <span class="caret"></span></button>
    <ul class="dropdown-menu">
      
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.1">v1.1</a></li>
      
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.0">v1.0</a></li>
      
    </ul>
  </div>
</div>

        </div>
        <div class="col-lg-9 content">
          

          





  
  
    
    
      
    
  

  
  
    
    
      



<ol class="breadcrumb">

  
  
    <li><i class="fa fa-sliders title maindish" aria-hidden="true"></i> Deployment & Operations</li>
  

  
  
    <li class="active">Savepoints</li>
  

</ol>

<h1>Savepoints</h1>



<p>Programs written in the <a href="index.html">Data Stream API</a> can resume execution from a <strong>savepoint</strong>. Savepoints allow both updating your programs and your Flink cluster without losing any state. This page covers all steps to trigger, restore, and dispose savepoints. For more details on how Flink handles state and failures, check out the <a href="https://alpinegizmo.github.io/flink-docs/dev/state_backends.html">State in Streaming Programs</a> and <a href="fault_tolerance.html">Fault Tolerance</a> pages.</p>

<ul id="markdown-toc">
  <li><a href="#overview" id="markdown-toc-overview">Overview</a></li>
  <li><a href="#configuration" id="markdown-toc-configuration">Configuration</a></li>
  <li><a href="#changes-to-your-program" id="markdown-toc-changes-to-your-program">Changes to your program</a></li>
  <li><a href="#command-line-client" id="markdown-toc-command-line-client">Command-line client</a></li>
  <li><a href="#current-limitations" id="markdown-toc-current-limitations">Current limitations</a></li>
</ul>

<h2 id="overview">Overview</h2>

<p>In the example below the workers produce checkpoints <strong>c<sub>1</sub></strong>, <strong>c<sub>2</sub></strong>,
<strong>c<sub>3</sub></strong>, and <strong>c<sub>4</sub></strong> for job <em>0xA312Bc</em>. Periodic checkpoints <strong>c<sub>1</sub></strong>
and <strong>c<sub>3</sub></strong> have already been <em>discarded</em> and <strong>c<sub>4</sub></strong> is the <em>latest
checkpoint</em>. <strong>c<sub>2</sub> is special</strong>. It is the state associated with the savepoint
<strong>s<sub>1</sub></strong> and has been triggered by the user and it doesn’t expire automatically (as
c<sub>1</sub> and c<sub>3</sub> did after the completion of newer checkpoints).</p>

<p><img src="https://alpinegizmo.github.io/flink-docs/fig/savepoints-overview.png" class="center" /></p>

<p>Note that <strong>s<sub>1</sub></strong> is only a <strong>pointer to the actual checkpoint data c<sub>2</sub></strong>. This means that the actual state is <em>not copied</em> for the savepoint and periodic checkpoint data is kept around.</p>

<h2 id="configuration">Configuration</h2>

<p>Savepoints are stored in a configured <strong>file system directory</strong>. They are available between cluster instances and allow you to move your program to another cluster.</p>

<pre>
state.savepoints.dir: hdfs:///flink/savepoints
</pre>

<p><strong>Note</strong>: If you don’t configure a specific directory, triggering the savepoint will fail.</p>

<p><strong>Important</strong>: A savepoint is a pointer to a completed checkpoint. That means that the state of a savepoint is not only found in the savepoint file itself, but also needs the actual checkpoint data (e.g. in a set of further files).</p>

<h2 id="changes-to-your-program">Changes to your program</h2>

<p>Savepoints <strong>work out of the box</strong>, but it is <strong>highly recommended</strong> that you slightly adjust your programs in order to be able to work with savepoints in future versions of your program.</p>

<p><img src="https://alpinegizmo.github.io/flink-docs/fig/savepoints-program_ids.png" class="center" /></p>

<p>For savepoints <strong>only stateful tasks matter</strong>. In the above example, the source and map tasks are stateful whereas the sink is not stateful. Therefore, only the state of the source and map tasks are part of the savepoint.</p>

<p>Each task is identified by its <strong>generated task IDs</strong> and <strong>subtask index</strong>. In the above example the state of the source (<strong>s<sub>1</sub></strong>, <strong>s<sub>2</sub></strong>) and map tasks (<strong>m<sub>1</sub></strong>, <strong>m<sub>2</sub></strong>) is identified by their respective task ID (<em>0xC322EC</em> for the source tasks and <em>0x27B3EF</em> for the map tasks) and subtask index. There is no state for the sinks (<strong>t<sub>1</sub></strong>, <strong>t<sub>2</sub></strong>). Their IDs therefore do not matter.</p>

<p><span class="label label-danger">Important</span> The IDs are generated <strong>deterministically</strong> from your program structure. This means that as long as your program does not change, the IDs do not change. <strong>The only allowed changes are within the user function, e.g. you can change the implemented <code>MapFunction</code> without changing the topology</strong>. In this case, it is straight forward to restore the state from a savepoint by mapping it back to the same task IDs and subtask indexes. This allows you to work with savepoints out of the box, but gets problematic as soon as you make changes to the topology, because they result in changed IDs and the savepoint state cannot be mapped to your program any more.</p>

<p><span class="label label-info">Recommended</span> In order to be able to change your program and <strong>have fixed IDs</strong>, the <em>DataStream</em> API provides a method to manually specify the task IDs. Each operator provides a <strong><code>uid(String)</code></strong> method to override the generated ID. The ID is a String, which will be deterministically hashed to a 16-byte hash value. It is <strong>important</strong> that the specified IDs are <strong>unique per transformation and job</strong>. If this is not the case, job submission will fail.</p>

<figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="nc">DataStream</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">stream</span> <span class="k">=</span> <span class="n">env</span><span class="o">.</span>
  <span class="c1">// Stateful source (e.g. Kafka) with ID</span>
  <span class="o">.</span><span class="n">addSource</span><span class="o">(</span><span class="k">new</span> <span class="nc">StatefulSource</span><span class="o">())</span>
  <span class="o">.</span><span class="n">uid</span><span class="o">(</span><span class="s">&quot;source-id&quot;</span><span class="o">)</span>
  <span class="o">.</span><span class="n">shuffle</span><span class="o">()</span>
  <span class="c1">// The stateful mapper with ID</span>
  <span class="o">.</span><span class="n">map</span><span class="o">(</span><span class="k">new</span> <span class="nc">StatefulMapper</span><span class="o">())</span>
  <span class="o">.</span><span class="n">uid</span><span class="o">(</span><span class="s">&quot;mapper-id&quot;</span><span class="o">)</span>

<span class="c1">// Stateless sink (no specific ID required)</span>
<span class="n">stream</span><span class="o">.</span><span class="n">print</span><span class="o">()</span></code></pre></figure>

<h2 id="command-line-client">Command-line client</h2>

<p>You control the savepoints via the <a href="https://alpinegizmo.github.io/flink-docs/setup/cli.html#savepoints">command line client</a>.</p>

<h2 id="current-limitations">Current limitations</h2>

<ul>
  <li>
    <p><strong>Parallelism</strong>: When restoring a savepoint, the parallelism of the program has to match the parallelism of the original program from which the savepoint was drawn. There is no mechanism to re-partition the savepoint’s state yet.</p>
  </li>
  <li>
    <p><strong>Chaining</strong>: Chained operators are identified by the ID of the first task. It’s not possible to manually assign an ID to an intermediate chained task, e.g. in the chain <code>[  a -&gt; b -&gt; c ]</code> only <strong>a</strong> can have its ID assigned manually, but not <strong>b</strong> or <strong>c</strong>. To work around this, you can <a href="index.html#task-chaining-and-resource-groups">manually define the task chains</a>. If you rely on the automatic ID assignment, a change in the chaining behaviour will also change the IDs.</p>
  </li>
</ul>


        </div>
      </div>
    </div><!-- /.container -->

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/3.1.0/anchor.min.js"></script>
    <script src="https://alpinegizmo.github.io/flink-docs/page/js/flink.js"></script>

    <!-- Google Analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-52545728-1', 'auto');
      ga('send', 'pageview');
    </script>

    <!-- Disqus -->
    
  </body>
</html>
